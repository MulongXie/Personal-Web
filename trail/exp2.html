<html>
<head>
    <style>
    </style>

</head>
<body>
<canvas id="paint" width="1200" height="600" onmousemove="fetch(event)"></canvas>

<div style="position: absolute; left: 50px; top: 50px">
    <h1 id="pos"></h1>
</div>


<script>

    var canvas = document.getElementById('paint');
    var ctx = canvas.getContext('2d');

    var wid = canvas.width, hgt = canvas.height;
    var gridwid = 200, gridhgt = 200;

    var pre_grid = {};
    function fetch(event) {
        // if (pre_grid){
        //     cleanGrid(pre_grid.x, pre_grid.y);
        // }
        var pos = getMousePos(event);
        var up_left = {};
        up_left['x'] = Math.floor(pos.x / gridwid) * gridwid;
        up_left['y'] = Math.floor(pos.y / gridhgt) * gridhgt;
        document.getElementById('pos').innerText = "(" + up_left.x + "," + up_left.y + ")" + "(" + pos.x + "," + pos.y + ")";
        paint(pos.x, pos.y);
        fillGrid(up_left.x, up_left.y);
        pre_grid = up_left;
    }

    function getMousePos(event) {
        var e = event;
        var scrollX = document.documentElement.scrollLeft;
        var scrollY = document.documentElement.scrollTop;
        var x = e.clientX + scrollX;
        var y = e.clientY + scrollY;
        return { 'x': x, 'y': y };
    }

    function paint(start_c_x, start_c_y) {
        var grd = ctx.createRadialGradient(start_c_x, start_c_y, 2, wid / 2, hgt / 2, wid);
        grd.addColorStop(0, 'red');
        grd.addColorStop(1, 'gold');

        ctx.fillStyle = grd;
        ctx.fillRect(1, 1, wid - 1, hgt - 1);

    }

    function grid() {
        var x = 0, y = 0;
        while (x <= wid){
            y = 0;
            while (y <= hgt){
                // draw grids
                ctx.beginPath();
                ctx.globalAlpha = 0.1;
                ctx.rect(x, y, gridwid, gridhgt);
                ctx.stroke();
                y += gridhgt;
            }
            x += gridwid;
        }
    }

    function fillGrid(x, y) {
        ctx.beginPath();
        ctx.strokeStyle = "yellow";

        var al = 0.0;
        function fadein(){
            al += 0.2;
            ctx.globalAlpha = al;
            console.log(al);
            if (al < 1.0){
                setTimeout(fadein, 1000);
            }
        }
        fadein();

        ctx.rect(x, y, gridwid, gridhgt);
        ctx.stroke();
    }

    function cleanGrid(up_l_x, up_l_y) {
        ctx.fillStyle = 'green';
        ctx.fillRect(up_l_x + 1, up_l_y + 1, gridwid - 1, gridhgt - 1);
    }

    paint(wid/2, hgt/2);

</script>

</body>
</html>